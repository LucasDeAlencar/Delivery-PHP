<!DOCTYPE html>\n<html lang=\"pt-br\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Teste - Popup de Compra</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link rel=\"stylesheet\" href=\"public/web/src/css/popup-compra.css\">\n    <style>\n        body { padding: 20px; background: #f8f9fa; }\n        .produto-teste {\n            background: white;\n            border-radius: 10px;\n            padding: 20px;\n            margin: 10px;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n        .produto-teste:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 5px 20px rgba(0,0,0,0.15);\n        }\n        .flaticon-pizza-1:before { content: \"üçï\"; }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1 class=\"text-center mb-4\">üçï Teste do Popup de Compra</h1>\n        \n        <div class=\"alert alert-info\">\n            <strong>Instru√ß√µes:</strong> Clique em qualquer produto abaixo para testar o popup de compra.\n        </div>\n        \n        <div class=\"row\">\n            <!-- Produto 1 -->\n            <div class=\"col-md-4\">\n                <div class=\"produto-teste produto-item\"\n                     data-produto-id=\"1\"\n                     data-produto-nome=\"Pizza Margherita\"\n                     data-produto-preco=\"35.90\"\n                     data-produto-categoria=\"Pizzas\"\n                     data-produto-descricao=\"Deliciosa pizza com molho de tomate, mussarela e manjeric√£o fresco.\"\n                     data-produto-imagem=\"\">\n                    <h5>üçï Pizza Margherita</h5>\n                    <p class=\"text-muted\">Molho de tomate, mussarela e manjeric√£o</p>\n                    <p class=\"text-success font-weight-bold\">R$ 35,90</p>\n                </div>\n            </div>\n            \n            <!-- Produto 2 -->\n            <div class=\"col-md-4\">\n                <div class=\"produto-teste produto-item\"\n                     data-produto-id=\"2\"\n                     data-produto-nome=\"Lasanha Bolonhesa\"\n                     data-produto-preco=\"28.50\"\n                     data-produto-categoria=\"Massas\"\n                     data-produto-descricao=\"Lasanha tradicional com molho bolonhesa, queijo e bechamel.\"\n                     data-produto-imagem=\"\">\n                    <h5>üçù Lasanha Bolonhesa</h5>\n                    <p class=\"text-muted\">Molho bolonhesa, queijo e bechamel</p>\n                    <p class=\"text-success font-weight-bold\">R$ 28,50</p>\n                </div>\n            </div>\n            \n            <!-- Produto 3 -->\n            <div class=\"col-md-4\">\n                <div class=\"produto-teste produto-item\"\n                     data-produto-id=\"3\"\n                     data-produto-nome=\"Risotto de Camar√£o\"\n                     data-produto-preco=\"42.00\"\n                     data-produto-categoria=\"Risotos\"\n                     data-produto-descricao=\"Risotto cremoso com camar√µes frescos e temperos especiais.\"\n                     data-produto-imagem=\"\">\n                    <h5>üç§ Risotto de Camar√£o</h5>\n                    <p class=\"text-muted\">Risotto cremoso com camar√µes frescos</p>\n                    <p class=\"text-success font-weight-bold\">R$ 42,00</p>\n                </div>\n            </div>\n        </div>\n        \n        <div class=\"row mt-4\">\n            <div class=\"col-12\">\n                <div class=\"alert alert-success\">\n                    <h5>‚úÖ Funcionalidades Test√°veis:</h5>\n                    <ul class=\"mb-0\">\n                        <li>Clique nos produtos para abrir o popup</li>\n                        <li>Teste os bot√µes de quantidade (+ e -)</li>\n                        <li>Digite observa√ß√µes (m√°x. 200 caracteres)</li>\n                        <li>Adicione produtos ao carrinho</li>\n                        <li>Verifique as notifica√ß√µes de sucesso</li>\n                        <li>Teste a responsividade redimensionando a janela</li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- Modal de Compra (copiado do menu_produtos.php) -->\n    <div class=\"modal fade\" id=\"modalCompra\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"modalCompraLabel\" aria-hidden=\"true\">\n        <div class=\"modal-dialog modal-lg\" role=\"document\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header bg-primary text-white\">\n                    <h5 class=\"modal-title\" id=\"modalCompraLabel\">\n                        <i class=\"flaticon-pizza-1 mr-2\"></i>Finalizar Compra\n                    </h5>\n                    <button type=\"button\" class=\"close text-white\" data-dismiss=\"modal\" aria-label=\"Close\">\n                        <span aria-hidden=\"true\">&times;</span>\n                    </button>\n                </div>\n                <div class=\"modal-body\">\n                    <div class=\"row\">\n                        <!-- Imagem do Produto -->\n                        <div class=\"col-md-5\">\n                            <div class=\"produto-imagem text-center\">\n                                <img id=\"modal-produto-imagem\" src=\"\" alt=\"\" class=\"img-fluid rounded\" style=\"max-height: 300px;\">\n                                <div id=\"modal-produto-placeholder\" class=\"d-none\">\n                                    <div class=\"bg-light rounded d-flex align-items-center justify-content-center\" style=\"height: 300px;\">\n                                        <i class=\"flaticon-pizza-1\" style=\"font-size: 4rem; color: #ccc;\"></i>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        \n                        <!-- Detalhes do Produto -->\n                        <div class=\"col-md-7\">\n                            <h4 id=\"modal-produto-nome\" class=\"mb-3\"></h4>\n                            <p id=\"modal-produto-categoria\" class=\"text-muted mb-3\"></p>\n                            <p id=\"modal-produto-descricao\" class=\"mb-4\"></p>\n                            \n                            <!-- Pre√ßo Unit√°rio -->\n                            <div class=\"mb-4\">\n                                <label class=\"font-weight-bold\">Pre√ßo Unit√°rio:</label>\n                                <div id=\"modal-produto-preco\" class=\"h4 text-primary\"></div>\n                            </div>\n                            \n                            <!-- Quantidade -->\n                            <div class=\"mb-4\">\n                                <label for=\"quantidade\" class=\"font-weight-bold\">Quantidade:</label>\n                                <div class=\"input-group\" style=\"max-width: 150px;\">\n                                    <div class=\"input-group-prepend\">\n                                        <button class=\"btn btn-outline-secondary\" type=\"button\" id=\"btn-diminuir\">-</button>\n                                    </div>\n                                    <input type=\"number\" class=\"form-control text-center\" id=\"quantidade\" value=\"1\" min=\"1\" readonly>\n                                    <div class=\"input-group-append\">\n                                        <button class=\"btn btn-outline-secondary\" type=\"button\" id=\"btn-aumentar\">+</button>\n                                    </div>\n                                </div>\n                            </div>\n                            \n                            <!-- Total -->\n                            <div class=\"mb-4 p-3 bg-light rounded\">\n                                <div class=\"d-flex justify-content-between align-items-center\">\n                                    <span class=\"font-weight-bold\">Total:</span>\n                                    <span id=\"modal-total\" class=\"h3 text-success mb-0\"></span>\n                                </div>\n                            </div>\n                            \n                            <!-- Observa√ß√µes -->\n                            <div class=\"mb-3\">\n                                <label for=\"observacoes\" class=\"font-weight-bold\">Observa√ß√µes (opcional):</label>\n                                <textarea class=\"form-control\" id=\"observacoes\" rows=\"3\" placeholder=\"Alguma observa√ß√£o especial?\"></textarea>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"modal-footer\">\n                    <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Cancelar</button>\n                    <button type=\"button\" class=\"btn btn-primary\" id=\"btn-adicionar-carrinho\">\n                        <i class=\"flaticon-pizza-1 mr-2\"></i>Adicionar ao Carrinho\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- Scripts -->\n    <script src=\"https://code.jquery.com/jquery-3.6.0.min.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js\"></script>\n    \n    <!-- JavaScript do Popup (copiado e adaptado) -->\n    <script>\n    $(document).ready(function() {\n        let precoUnitario = 0;\n        let produtoAtual = {};\n        \n        // Fun√ß√£o para formatar pre√ßo\n        function formatarPreco(valor) {\n            return 'R$ ' + parseFloat(valor).toFixed(2).replace('.', ',');\n        }\n        \n        // Fun√ß√£o para calcular total\n        function calcularTotal() {\n            const quantidade = parseInt($('#quantidade').val()) || 1;\n            const total = precoUnitario * quantidade;\n            $('#modal-total').text(formatarPreco(total));\n            return total;\n        }\n        \n        // Fun√ß√£o para mostrar notifica√ß√£o\n        function mostrarNotificacao(titulo, mensagem, tipo = 'success') {\n            const icone = tipo === 'success' ? '‚úÖ' : '‚ùå';\n            const cor = tipo === 'success' ? '#28a745' : '#dc3545';\n            \n            const notificacao = $(`\n                <div class=\"notificacao-popup\" style=\"\n                    position: fixed;\n                    top: 20px;\n                    right: 20px;\n                    background: ${cor};\n                    color: white;\n                    padding: 15px 20px;\n                    border-radius: 10px;\n                    box-shadow: 0 5px 15px rgba(0,0,0,0.3);\n                    z-index: 9999;\n                    max-width: 300px;\n                    transform: translateX(100%);\n                    transition: all 0.3s ease;\n                \">\n                    <div style=\"display: flex; align-items: center; gap: 10px;\">\n                        <span style=\"font-size: 20px;\">${icone}</span>\n                        <div>\n                            <div style=\"font-weight: bold; margin-bottom: 5px;\">${titulo}</div>\n                            <div style=\"font-size: 14px; opacity: 0.9;\">${mensagem}</div>\n                        </div>\n                    </div>\n                </div>\n            `);\n            \n            $('body').append(notificacao);\n            \n            setTimeout(() => notificacao.css('transform', 'translateX(0)'), 100);\n            setTimeout(() => {\n                notificacao.css('transform', 'translateX(100%)');\n                setTimeout(() => notificacao.remove(), 300);\n            }, 4000);\n        }\n        \n        // Clique no produto\n        $('.produto-item').click(function() {\n            const $produto = $(this);\n            \n            produtoAtual = {\n                id: $produto.data('produto-id'),\n                nome: $produto.data('produto-nome'),\n                preco: $produto.data('produto-preco'),\n                categoria: $produto.data('produto-categoria'),\n                descricao: $produto.data('produto-descricao'),\n                imagem: $produto.data('produto-imagem')\n            };\n            \n            precoUnitario = parseFloat(produtoAtual.preco) || 0;\n            \n            $('#modal-produto-nome').text(produtoAtual.nome);\n            $('#modal-produto-categoria').text('Categoria: ' + produtoAtual.categoria);\n            $('#modal-produto-descricao').text(produtoAtual.descricao || 'Sem descri√ß√£o dispon√≠vel');\n            $('#modal-produto-preco').text(formatarPreco(precoUnitario));\n            \n            // Como n√£o temos imagem no teste, sempre mostrar placeholder\n            $('#modal-produto-imagem').addClass('d-none');\n            $('#modal-produto-placeholder').removeClass('d-none');\n            \n            $('#quantidade').val(1);\n            $('#observacoes').val('');\n            calcularTotal();\n            \n            $('#modalCompra').modal('show');\n        });\n        \n        // Bot√µes de quantidade\n        $('#btn-aumentar').click(function() {\n            const quantidade = parseInt($('#quantidade').val()) || 1;\n            $('#quantidade').val(quantidade + 1);\n            calcularTotal();\n        });\n        \n        $('#btn-diminuir').click(function() {\n            const quantidade = parseInt($('#quantidade').val()) || 1;\n            if (quantidade > 1) {\n                $('#quantidade').val(quantidade - 1);\n                calcularTotal();\n            }\n        });\n        \n        // Adicionar ao carrinho\n        $('#btn-adicionar-carrinho').click(function() {\n            const quantidade = parseInt($('#quantidade').val()) || 1;\n            const total = calcularTotal();\n            const observacoes = $('#observacoes').val().trim();\n            \n            mostrarNotificacao(\n                'Produto Adicionado!',\n                `${produtoAtual.nome} (${quantidade}x) - ${formatarPreco(total)}`\n            );\n            \n            console.log('Produto adicionado:', {\n                produto: produtoAtual,\n                quantidade: quantidade,\n                total: total,\n                observacoes: observacoes\n            });\n            \n            $('#modalCompra').modal('hide');\n        });\n        \n        // Valida√ß√£o do campo observa√ß√µes\n        $('#observacoes').on('input', function() {\n            const maxLength = 200;\n            const currentLength = $(this).val().length;\n            \n            if (currentLength > maxLength) {\n                $(this).val($(this).val().substring(0, maxLength));\n            }\n            \n            let contador = $(this).siblings('.char-counter');\n            if (contador.length === 0) {\n                contador = $('<small class=\"char-counter text-muted\"></small>');\n                $(this).after(contador);\n            }\n            \n            const remaining = maxLength - $(this).val().length;\n            contador.text(`${remaining} caracteres restantes`);\n            \n            if (remaining < 20) {\n                contador.addClass('text-warning').removeClass('text-muted');\n            } else {\n                contador.addClass('text-muted').removeClass('text-warning');\n            }\n        });\n    });\n    </script>\n</body>\n</html>"